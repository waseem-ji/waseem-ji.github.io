<script>
  // Function to check if a specific query parameter exists in the URL
  function hasQueryParam(paramName) {
    const urlParams = new URLSearchParams(window.location.search);
    console.log(urlParams);
    return urlParams.has(paramName);
  }

  var checktimeout = 0;
  window.addEventListener("load", function () {
    waitForElement(".cky-consent-container", function () {
      if (hasQueryParam("gtm_debug")) {
        const consentContainer = document.querySelector(
          ".cky-consent-container"
        );
        const acceptButton = consentContainer?.querySelector(".cky-btn-accept");

        if (acceptButton) {
          acceptButton.click();
        }
      }
    });
  });
  function waitForElement(selector, callback) {
    const element = document.querySelector(selector);
    if (element) return callback();
    checktimeout++;
    if (checktimeout < 120) {
      setTimeout(function () {
        waitForElement(selector, callback);
      }, 500);
    }
  }
</script>
